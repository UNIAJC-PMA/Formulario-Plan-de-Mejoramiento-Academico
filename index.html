<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PMA - Asistencia a Tutor√≠as</title>
  <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/UNIAJC-PMA/Formulario-Asistencia-PMA/refs/heads/main/LOGO.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="header-bar">
    <h1 style="text-align: center;">PROGRAMA DE MEJORAMIENTO ACAD√âMICO (PMA)</h1>
    <p style="text-align: left; margin-top: 10px; line-height: 1.8;">
      <strong>Formulario de Asistencia a Tutor√≠as</strong><br>
      Instituci√≥n Universitaria Antonio Jos√© Camacho
    </p>
  </div>

  <div class="container">
    <!-- PANTALLA DE INICIO -->
    <div id="pantallaInicio">
      <h2 class="section-title">Bienvenido</h2>
      <p style="margin-bottom: 20px; line-height: 1.6; color: #555;">Seleccione una opci√≥n para continuar con el registro de su asistencia a tutor√≠as del Programa de Mejoramiento Acad√©mico.</p>
      <button class="btn" onclick="mostrarLogin()">Formulario</button>
      <button class="btn btn-secondary" onclick="mostrarRegistro()">Registrarse</button>
      
      <p class="registro-unico">El registro se realiza una √∫nica vez</p>

      <div style="margin-top: 25px; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #1e3c72;">
        <h3 style="color: #1e3c72; margin-bottom: 15px; text-align: center;">üìÖ Horarios y Lugar de Atenci√≥n</h3>
        
        <!-- Botones de sedes -->
        <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-bottom: 15px;">
          <button class="btn btn-secondary" onclick="toggleHorario('norte')" style="flex: 1; min-width: 150px; margin: 0;">
            Sede Norte
          </button>
          <button class="btn btn-secondary" onclick="toggleHorario('sur')" style="flex: 1; min-width: 150px; margin: 0;">
            Sede Sur
          </button>
          <button class="btn btn-secondary" onclick="toggleHorario('virtual')" style="flex: 1; min-width: 150px; margin: 0;">
            Virtual
          </button>
        </div>

        <!-- Horario Sede Norte -->
        <div id="horarioNorte" class="horario-info hidden">
          <h4 style="color: #1e3c72; margin-bottom: 12px; text-align: center;">Sede Norte</h4>
          
          <div style="background: white; padding: 15px; border-radius: 6px; margin-bottom: 12px;">
            <strong style="color: #1e3c72; display: block; margin-bottom: 8px;">De Lunes a Viernes</strong>
            <p style="margin: 0; color: #555; line-height: 1.8;">
              ‚è∞ 10:15 AM - 12:00 PM<br>
              ‚è∞ 2:15 PM - 6:30 PM<br>
              üìç Salones del Bloque D
            </p>
          </div>

          <div style="background: white; padding: 15px; border-radius: 6px;">
            <strong style="color: #1e3c72; display: block; margin-bottom: 8px;">S√°bados</strong>
            <p style="margin: 0; color: #555; line-height: 1.8;">
              ‚è∞ 1:00 PM - 4:00 PM<br>
              üìç Salones del Bloque D
            </p>
          </div>
        </div>

        <!-- Horario Sede Sur -->
        <div id="horarioSur" class="horario-info hidden">
          <h4 style="color: #1e3c72; margin-bottom: 12px; text-align: center;">Sede Sur</h4>
          
          <div style="background: white; padding: 15px; border-radius: 6px; margin-bottom: 12px;">
            <strong style="color: #1e3c72; display: block; margin-bottom: 8px;">De Lunes a Viernes</strong>
            <p style="margin: 0; color: #555; line-height: 1.8;">
              ‚è∞ 9:00 AM - 12:00 PM<br>
              ‚è∞ 2:00 PM - 6:00 PM<br>
              üìç Centro de Recursos para el Aprendizaje (CRA)
            </p>
          </div>

          <div style="background: white; padding: 15px; border-radius: 6px;">
            <strong style="color: #1e3c72; display: block; margin-bottom: 8px;">S√°bados</strong>
            <p style="margin: 0; color: #555; line-height: 1.8;">
              ‚è∞ 10:00 AM - 1:00 PM<br>
              üìç Centro de Recursos para el Aprendizaje (CRA)
            </p>
          </div>
        </div>

        <!-- Horario Virtual -->
        <div id="horarioVirtual" class="horario-info hidden">
          <h4 style="color: #1e3c72; margin-bottom: 12px; text-align: center;">Modalidad Virtual</h4>
          
          <div style="background: white; padding: 15px; border-radius: 6px;">
            <strong style="color: #1e3c72; display: block; margin-bottom: 8px;">Domingos</strong>
            <p style="margin: 0; color: #555; line-height: 1.8;">
              ‚è∞ Horarios de la ma√±ana<br>
              üìß Separar con anticipaci√≥n al correo:<br>
              <a href="mailto:pma@admon.uniajc.edu.co" style="color: #1e3c72; font-weight: 600;">pma@admon.uniajc.edu.co</a><br>
              üíª Modalidad Virtual
            </p>
          </div>
        </div>
      </div>

      <div class="admin-link">
        <a href="#" onclick="mostrarLoginAdmin(); return false;">Acceder como Administrador</a>
      </div>
    </div>

    <!-- PANTALLA DE REGISTRO -->
    <div id="pantallaRegistro" class="hidden">
      <h2 class="section-title">Registro de Estudiante</h2>
      
      <div class="alert-box">
        <strong>Importante:</strong>
        Es fundamental que complete correctamente todos sus datos personales y acad√©micos. Esta informaci√≥n ser√° utilizada para verificar su asistencia a las tutor√≠as y generar reportes oficiales. Aseg√∫rese de que los datos coincidan exactamente con su registro institucional.
      </div>

      <div id="mensajeRegistro"></div>
      <form id="formRegistro" onsubmit="registrarEstudiante(event)">
        <div class="form-group">
          <label>Documento de Identidad *</label>
          <input type="number" id="regDocumento" required min="1000000" max="999999999999">
        </div>
        <div class="form-group">
          <label>Primer Nombre *</label>
          <input type="text" id="regPrimerNombre" required style="text-transform: uppercase;">
        </div>
        <div class="form-group">
          <label>Segundo Nombre</label>
          <input type="text" id="regSegundoNombre" style="text-transform: uppercase;">
        </div>
        <div class="form-group">
          <label>Primer Apellido *</label>
          <input type="text" id="regPrimerApellido" required style="text-transform: uppercase;">
        </div>
        <div class="form-group">
          <label>Segundo Apellido *</label>
          <input type="text" id="regSegundoApellido" required style="text-transform: uppercase;">
        </div>
        <div class="form-group">
          <label>Facultad *</label>
          <select id="regFacultad" required onchange="cargarProgramas()">
            <option value="">Seleccione una facultad</option>
          </select>
        </div>
        <div class="form-group">
          <label>Programa Acad√©mico *</label>
          <select id="regPrograma" required disabled>
            <option value="">Primero seleccione una facultad</option>
          </select>
        </div>
        <div class="form-group">
          <label>Sede donde estudia *</label>
          <select id="regSede" required>
            <option value="">Seleccione una sede</option>
            <option value="Norte">Sede Norte</option>
            <option value="Sur">Sede Sur</option>
          </select>
        </div>

        <div id="confirmacionDatos" class="hidden">
          <div class="confirmation-box">
            <h3>Confirme sus datos antes de registrarse</h3>
            <div id="datosConfirmacion"></div>
          </div>
          <div class="alert-box" style="margin-top: 15px;">
            <strong>Revise cuidadosamente:</strong>
            Si sus datos no est√°n correctos, no podremos verificar su asistencia a las tutor√≠as. Una vez registrado, contacte al administrador para cualquier correcci√≥n.
          </div>
        </div>

        <button type="button" class="btn" id="btnContinuar" onclick="mostrarConfirmacion()">Continuar</button>
        <button type="submit" class="btn hidden" id="btnConfirmarRegistro">Confirmar y Registrarme</button>
        <button type="button" class="btn btn-secondary" onclick="volverInicio()">Cancelar</button>
      </form>
    </div>

    <!-- PANTALLA DE LOGIN -->
    <div id="pantallaLogin" class="hidden">
      <h2 class="section-title">Llenar Formulario</h2>
      <p style="margin-bottom: 20px; color: #555;">Ingrese su documento de identidad para acceder al formulario de registro de asistencia.</p>
      <div id="mensajeLogin"></div>
      <form id="formLogin" onsubmit="iniciarSesion(event)">
        <div class="form-group">
          <label>Documento de Identidad</label>
          <input type="number" id="loginDocumento" required min="1000000" max="999999999999">
        </div>
        <button type="submit" class="btn">Continuar</button>
        <button type="button" class="btn btn-secondary" onclick="volverInicio()">Volver</button>
      </form>
    </div>

    <!-- FORMULARIO DE TUTOR√çA -->
    <div id="pantallaFormulario" class="hidden">
      <h2 class="section-title">Registro de Asistencia</h2>
      
      <div class="user-greeting">
        <p id="nombreUsuario"></p>
      </div>

      <div id="mensajeFormulario"></div>
      <form id="formTutoria" onsubmit="guardarFormulario(event)">
        <div class="form-group">
          <label>Semestre *</label>
          <select id="semestre" required>
            <option value="">Seleccione el semestre</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
          </select>
        </div>

        <div class="form-group">
          <label>Grupo *</label>
          <input type="text" id="grupo" required style="text-transform: uppercase;">
        </div>

        <div class="form-group">
          <label>Tipo de acompa√±amiento acad√©mico *</label>
          <select id="tipoAcompanamiento" required onchange="toggleTituloCurso()">
            <option value="">Seleccione una opci√≥n</option>
            <option value="Tutor√≠a">Tutor√≠a</option>
            <option value="Curso y/o capacitaci√≥n">Curso y/o capacitaci√≥n</option>
          </select>
        </div>

        <div class="form-group hidden" id="grupoTituloCurso">
          <label>T√≠tulo del curso/capacitaci√≥n *</label>
          <input type="text" id="tituloCurso" style="text-transform: uppercase;">
        </div>

        <div class="form-group">
          <label>Sede donde recibi√≥ la tutor√≠a *</label>
          <select id="sedeTutoria" required onchange="cargarInstructores()">
            <option value="">Seleccione una sede</option>
            <option value="Norte">Sede Norte</option>
            <option value="Sur">Sede Sur</option>
          </select>
        </div>

        <div class="form-group">
          <label>¬øQui√©n imparti√≥ la tutor√≠a? *</label>
          <select id="tipoInstructor" required onchange="cargarInstructores()">
            <option value="">Seleccione una opci√≥n</option>
            <option value="Tutor">Tutor</option>
            <option value="Profesor">Profesor</option>
          </select>
        </div>

        <div class="form-group hidden" id="grupoInstructor">
          <label id="labelInstructor">Instructor *</label>
          <select id="instructor" required onchange="cargarMaterias()">
            <option value="">Seleccione un instructor</option>
          </select>
        </div>

        <div class="form-group hidden" id="grupoMateria">
          <label>Asignatura *</label>
          <select id="asignatura" required onchange="cargarTemas()">
            <option value="">Seleccione una asignatura</option>
          </select>
        </div>

        <div class="form-group hidden" id="grupoTema">
          <label>Tema de la tutor√≠a *</label>
          <select id="tema" required onchange="toggleOtroTema()">
            <option value="">Seleccione un tema</option>
          </select>
          <div id="otroTemaContainer" class="otro-tema hidden">
            <input type="text" id="otroTema" placeholder="Especifique el tema">
          </div>
        </div>

        <div class="form-group hidden" id="grupoCalificacion">
          <label>Calificaci√≥n de la tutor√≠a *</label>
          <p style="font-size: 13px; color: #666; margin-bottom: 5px; line-height: 1.6;">
            Eval√∫e la calidad de la tutor√≠a recibida<br>
            1 = Deficiente<br>
            5 = Excelente
          </p>
          <div class="rating">
            <input type="radio" name="calificacion" id="cal1" value="1" required>
            <label for="cal1">1</label>
            <input type="radio" name="calificacion" id="cal2" value="2">
            <label for="cal2">2</label>
            <input type="radio" name="calificacion" id="cal3" value="3">
            <label for="cal3">3</label>
            <input type="radio" name="calificacion" id="cal4" value="4">
            <label for="cal4">4</label>
            <input type="radio" name="calificacion" id="cal5" value="5">
            <label for="cal5">5</label>
          </div>
        </div>

        <div class="form-group hidden" id="grupoSugerencias">
          <label>Sugerencias o Comentarios</label>
          <textarea id="sugerencias" placeholder="Escriba aqu√≠ sus sugerencias, comentarios o recomendaciones"></textarea>
          <label style="margin-top: 10px; font-weight: normal; font-size: 13px;">
            <input type="checkbox" id="ningunaSugerencia" onchange="toggleSugerencias()"> No tengo sugerencias
          </label>
        </div>

        <button type="submit" class="btn hidden" id="btnEnviar">Enviar Formulario</button>
        <button type="button" class="btn btn-secondary" onclick="cerrarSesion()">Cerrar Sesi√≥n</button>
      </form>
    </div>

    <!-- PANEL DE ADMINISTRADOR - LOGIN -->
    <div id="pantallaAdminLogin" class="hidden">
      <h2 class="section-title">Acceso de Administrador</h2>
      <div id="mensajeAdminLogin"></div>
      <form id="formAdminLogin" onsubmit="loginAdmin(event)">
        <div class="form-group">
          <label>Documento de Administrador</label>
          <input type="number" id="adminDocumento" required>
        </div>
        <button type="submit" class="btn">Ingresar</button>
        <button type="button" class="btn btn-secondary" onclick="volverInicio()">Volver</button>
      </form>
    </div>

    <!-- PANEL DE ADMINISTRADOR -->
    <div id="pantallaAdmin" class="hidden">
      <h2 class="section-title">Panel de Administraci√≥n</h2>
      <p id="nombreAdmin" style="color: #666; margin-bottom: 20px;"></p>
      
      <div class="admin-tabs">
        <button class="admin-tab active" onclick="cambiarTab(event, 'estadisticas')">Estad√≠sticas</button>
        <button class="admin-tab" onclick="cambiarTab(event, 'descargas')">Descargar Datos</button>
      </div>

      <div id="tabEstadisticas">
        <div class="stats-grid" id="statsGrid"></div>
        <div id="detallesStats"></div>
      </div>

      <div id="tabDescargas" class="hidden">
        <div class="chart-container">
          <h3 class="chart-title">Descargar Reportes</h3>
          <p style="margin-bottom: 20px; color: #555; font-size: 14px;">Descargue los registros de asistencia en formato CSV para an√°lisis en Excel.</p>
          
          <div class="form-group">
            <label>Fecha Desde</label>
            <input type="date" id="fechaDesde">
          </div>
          <div class="form-group">
            <label>Fecha Hasta</label>
            <input type="date" id="fechaHasta">
          </div>
          <button class="btn" onclick="descargarDatos()">Descargar por Rango de Fechas</button>
          <button class="btn btn-secondary" onclick="descargarTodo()">Descargar Todos los Registros</button>
        </div>
      </div>

      <button type="button" class="btn btn-secondary" style="margin-top: 25px;" onclick="cerrarSesionAdmin()">Cerrar Sesi√≥n</button>
    </div>
  </div>

  <!-- Logo fuera del contenedor -->
  <div style="text-align: center; margin-top: 30px; padding-bottom: 30px;">
    <img id="logoUniversidad" src="https://raw.githubusercontent.com/UNIAJC-PMA/Formulario-Asistencia-PMA/refs/heads/main/LOGO%20BLANCO.png" alt="Logo UNIAJC" style="max-width: 150px; height: auto;">
    <p style="font-size: 12px; color: #fff; margin-top: 10px;">
      Instituci√≥n Universitaria Antonio Jos√© Camacho
    </p>
  </div>

  <!-- Modal de √©xito de registro -->
  <div id="modalExitoRegistro" class="modal-overlay hidden" style="display: none;">
    <div class="modal-success">
      <div class="success-icon">‚úì</div>
      <h2>¬°Registro Exitoso!</h2>
      <p>Bienvenido al Programa de Mejoramiento Acad√©mico (PMA)</p>
      <p class="small-text">Redirigiendo a la p√°gina principal...</p>
    </div>
  </div>

  <!-- Modal de √©xito de formulario -->
  <div id="modalExitoFormulario" class="modal-overlay hidden" style="display: none;">
    <div class="modal-success">
      <div class="success-icon">‚úì</div>
      <h2>¬°Formulario Enviado!</h2>
      <p>Gracias por su participaci√≥n en el PMA</p>
      <p class="small-text">Redirigiendo a la p√°gina principal...</p>
    </div>
  </div>

  <!-- Modal de confirmaci√≥n de cancelaci√≥n -->
  <div id="modalConfirmacion" class="modal-overlay hidden" style="display: none;">
    <div class="modal-confirmacion">
      <h2 id="tituloConfirmacion">¬øEst√°s seguro?</h2>
      <p id="mensajeConfirmacion">Esta acci√≥n no se puede deshacer.</p>
      <div class="modal-buttons">
        <button class="btn" id="btnConfirmarModal">S√≠, estoy seguro</button>
        <button class="btn btn-secondary" id="btnCancelarModal">No, volver</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>